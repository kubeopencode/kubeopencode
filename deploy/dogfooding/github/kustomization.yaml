# Copyright Contributors to the KubeOpenCode project
# Kustomization for Argo Events resources.
# These resources replace the KubeOpenCode WebhookTrigger functionality.
#
# Prerequisites:
# 1. Install Argo Events: https://argoproj.github.io/argo-events/installation/
# 2. Ensure the EventBus controller is running
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kubeopencode-github
resources:
  - namespace.yaml
  - eventbus.yaml
  - rbac.yaml
  - eventsource-bot.yaml
  - eventsource-dev.yaml
  # Sensors are split by event type for proper filtering:
  # - sensor-bot.yaml: PR opened events (auto review)
  # - sensor-bot-mentions.yaml: All @kubeopencode-bot mentions
  # - sensor-dev.yaml: All @kubeopencode-dev mentions from privileged users
  - sensor-bot-pr-opened.yaml
  - sensor-bot-mentions.yaml
  - sensor-dev.yaml
  - deployment-smee-client.yaml
  - secrets.yaml